vulnerability_id: VCID-safw-ypg8-aaae
aliases:
  - GHSA-xfhw-6mc4-mgxf
summary: |
  crayon: ObjectPool creates uninitialized memory when freeing objects
  As of version 0.6.0, the ObjectPool explicitly creates an uninitialized instance of its type parameter when it attempts to free an object, and swaps it into the storage. This causes instant undefined behavior due to reading the uninitialized memory in order to write it to the pool storage.

  Extremely basic usage of the crate can trigger this issue, e.g. this code from a doctest:

  ```rust
  use crayon::prelude::*;
  application::oneshot().unwrap();

  let mut params = MeshParams::default();

  let mesh = video::create_mesh(params, None).unwrap();

  // Deletes the mesh object.
  video::delete_mesh(mesh); // <-- UB
  ```

  The Clippy warning for this code was silenced in commit c2fde19caf6149d91faa504263f0bc5cafc35de5.

  Discovered via https://asan.saethlin.dev/ub?crate=crayon&version=0.7.1
severities:
  - score: HIGH
    scoring_system: cvssv3.1_qr
    scoring_elements:
    published_at: None
    url: https://github.com/advisories/GHSA-xfhw-6mc4-mgxf
  - score: '7.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://github.com/shawnscode/crayon
  - score: HIGH
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://github.com/shawnscode/crayon
  - score: '7.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://github.com/shawnscode/crayon/commit/c2fde19caf6149d91faa504263f0bc5cafc35de5
  - score: HIGH
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://github.com/shawnscode/crayon/commit/c2fde19caf6149d91faa504263f0bc5cafc35de5
  - score: '7.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://github.com/shawnscode/crayon/issues/109
  - score: HIGH
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://github.com/shawnscode/crayon/issues/109
  - score: '7.5'
    scoring_system: cvssv3.1
    scoring_elements: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H
    published_at: None
    url: https://rustsec.org/advisories/RUSTSEC-2024-0018.html
  - score: HIGH
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://rustsec.org/advisories/RUSTSEC-2024-0018.html
weaknesses:
  - CWE-908
references:
  - url: https://github.com/shawnscode/crayon
    reference_type:
    reference_id:
  - url: https://github.com/shawnscode/crayon/commit/c2fde19caf6149d91faa504263f0bc5cafc35de5
    reference_type:
    reference_id:
  - url: https://github.com/shawnscode/crayon/issues/109
    reference_type:
    reference_id:
  - url: https://rustsec.org/advisories/RUSTSEC-2024-0018.html
    reference_type:
    reference_id:
  - url: https://github.com/advisories/GHSA-xfhw-6mc4-mgxf
    reference_type:
    reference_id: GHSA-xfhw-6mc4-mgxf
