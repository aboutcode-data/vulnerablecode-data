vulnerability_id: VCID-q69m-qdt9-aaaj
aliases:
  - GHSA-c8v3-jhv9-4ppc
summary: |
  Use-after-free when setting the locale
  Version 3.0.0 introduced an `AtomicStr` type, that is used to store the current locale. It stores the locale as a raw pointer to an `Arc<String>`. The locale can be read with `AtomicStr::as_str()`. `AtomicStr::as_str()` does not increment the usage counter of the `Arc`.

  If the locale is changed in one thread, another thread can have a stale -- possibly already freed -- reference to the stored string.
severities:
  - score: MODERATE
    scoring_system: cvssv3.1_qr
    scoring_elements:
    published_at: None
    url: https://github.com/advisories/GHSA-c8v3-jhv9-4ppc
  - score: MODERATE
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://github.com/longbridgeapp/rust-i18n
  - score: MODERATE
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://github.com/longbridgeapp/rust-i18n/commit/22e0609591a2c08930f52a0e6bc860f02a0e88c0
  - score: MODERATE
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://github.com/longbridgeapp/rust-i18n/issues/71
  - score: MODERATE
    scoring_system: generic_textual
    scoring_elements:
    published_at: None
    url: https://rustsec.org/advisories/RUSTSEC-2024-0007.html
weaknesses:
  - CWE-416
references:
  - url: https://github.com/longbridgeapp/rust-i18n
    reference_type:
    reference_id:
  - url: https://github.com/longbridgeapp/rust-i18n/commit/22e0609591a2c08930f52a0e6bc860f02a0e88c0
    reference_type:
    reference_id:
  - url: https://github.com/longbridgeapp/rust-i18n/issues/71
    reference_type:
    reference_id:
  - url: https://rustsec.org/advisories/RUSTSEC-2024-0007.html
    reference_type:
    reference_id:
  - url: https://github.com/advisories/GHSA-c8v3-jhv9-4ppc
    reference_type:
    reference_id: GHSA-c8v3-jhv9-4ppc
